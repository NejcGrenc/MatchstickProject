

<div class="centered">
	<div class="vertical-layout">
		<div>
	    	<p id="m_welcome" class="white">Welcome</p>
	    </div>
		<div class="horizontal-layout">
			<input type="text" id="m_nameInput" name="name" placeholder="Write your name" 
					oninput="nameInputChange()" onchange="nameInputChange()" maxlength="35"
					onkeypress="return blockSpecialCharForNameField(event)">
					<!-- Maybe needed also onpropertychange="nameInputChange()"  -->
			<div id="buffer-zone" style="padding: 0px 10px;"></div>
	    	<div>
	    		<span id="loginButton" class="greenButton" onclick="sendLogin()" ><span class="permanentLabel"></span></span>
	    	</div>
	    </div>
	    <div id="existing_part" class="horizontal-layout">
			<p id="m_repeatedLogin" class="white" style="width:50%;"> Are you logging in for the first time? </p>
			<div id="buffer-zone" style="padding: 0px 10px;"></div>
	    	<div id="check_repeated_button">
	    		<span id="reloginButton_yes" class="blueButton" onclick="sendRelogin_yes()" >Yes</span>
	    		<span id="reloginButton_no" class="blueButton" onclick="sendRelogin_no()" >No</span>
	    	</div>
	    </div>
	    <div>
	    	<p id="m_acknowledgement" class="white">By writing your name and pressing the green continue button, <br /> you agree to the the terms and conditions of the experiment.</p>
	    </div>
	</div>
</div>
 
<script>
	hideElementWithId("loginButton");
	hideElementWithId("existing_part");
	
	function sendLogin() {
		var subjectName = document.getElementById("m_nameInput").value;

		var data = {};
		data.subjectName = subjectName;
		post("/", data);
	}
	
	function sendRelogin_yes() {
		var subjectName = document.getElementById("m_nameInput").value;
		
		var data = {};
		data.subjectName = subjectName;
		data.forceSelectedUser = true;
		data.existingUser = false;
		post("/", data);
	}
	
	function sendRelogin_no() {
		var subjectName =  document.getElementById("m_nameInput").value;
		
		var data = {};
		data.subjectName = subjectName;
		data.forceSelectedUser = true;
		data.existingUser = true;
		post("/", data);
	}
	
	function nameInputChange() {
		showElementWithId("loginButton");
		hideElementWithId("existing_part");
	}
	
	// Send on enter
	document.getElementById("m_nameInput")
	    .addEventListener("keyup", function(event) {
	    event.preventDefault();
	    if (event.keyCode === 13) {
	        document.getElementById("loginButton").click();
	    }
	});
	
	// Repeated name
	function askForRepeated() {
		hideElementWithId("loginButton");
		showElementWithId("existing_part");
	}
	
	function insertExistingName(existingName) {
		document.getElementById("m_nameInput").value = existingName
	}
</script>